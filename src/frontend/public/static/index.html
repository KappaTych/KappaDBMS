<!DOCTYPE html>
<html>

<head>
  <title>KappaDBMS</title>
  {% load static %}
  <link rel="shortcut icon" href="{% static "kappaDBMS.ico" %}" type="image/x-icon" />
  <link rel="stylesheet" href="{% static "adminer.css" %}" type="text/css" />

  <script type="text/x-template" id="kappa-table-template">
    <table v-bind:name='name'>
      <thead>
        <tr>
          <th v-for="key in columns"
            @click="sortBy(key)"
            :class="{ active: sortKey == key }">
            [[ key | capitalize ]]
            <span class="arrow" :class="sortOrders[key] > 0 ? 'asc' : 'dsc'">
            </span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="entry in filteredData">
          <td v-for="key in columns">
            [[ entry[key] ]]
          </td>
        </tr>
      </tbody>
    </table>
  </script>
</head>

<body>
  <div class="grid-container">

    <div class="grid-item" id="app">

      <p>
        <label for="input_text_area">Input query:</label>
      </p>
      <textarea rows="10" cols="50" id="input_text_area" name="input_text_area" placeholder="Enter query" v-model='input'></textarea>
      <p>
        <button @click="sendQuery">Send query</button>
      </p>

      <p>
        <label for="output_text_area">Output result:</label>
      </p>
      <textarea rows="10" cols="50" id="output_text_area" name="output_text_area" placeholder="Awaiting" readonly v-model='output'></textarea>

    </div>

    <div class="grid-item" id="table">
      <p>[[ name ]]</p>
      <kappa-table :data="gridData" :columns="gridColumns" :filter-key="searchQuery">
      </kappa-table>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="{% static "index.js" %}"></script>

</body>

</html>